{
  "project_name": "todo_api",
  "framework": "Django",
  "version": "4.2",
  "files": {
    "models.py": "\"\"\"\n待辦事項 - 數據模型\n自動生成 by 藍圖小老鼠\n\"\"\"\n\nfrom django.db import models\nfrom django.contrib.auth.models import User\nfrom django.utils import timezone\n\n\nclass 待辦事項(models.Model):\n    \"\"\"\n    待辦事項管理\n    \"\"\"\n    # 基礎字段\n    created_at = models.DateTimeField(auto_now_add=True, verbose_name=\"創建時間\")\n    updated_at = models.DateTimeField(auto_now=True, verbose_name=\"更新時間\")\n    is_active = models.BooleanField(default=True, verbose_name=\"是否啟用\")\n    \n    # 用戶關聯\n    user = models.ForeignKey(\n        User,\n        on_delete=models.CASCADE,\n        related_name='%(class)s_set',\n        verbose_name=\"用戶\"\n    )\n    \n    # 基本信息\n    name = models.CharField(max_length=200, verbose_name=\"名稱\")\n    description = models.TextField(blank=True, verbose_name=\"描述\")\n    \n    # 狀態管理\n    STATUS_CHOICES = [\n        ('draft', '草稿'),\n        ('active', '啟用'),\n        ('archived', '歸檔'),\n    ]\n    status = models.CharField(\n        max_length=20,\n        choices=STATUS_CHOICES,\n        default='draft',\n        verbose_name=\"狀態\"\n    )\n    \n    class Meta:\n        verbose_name = \"待辦事項\"\n        verbose_name_plural = \"待辦事項列表\"\n        ordering = ['-created_at']\n        indexes = [\n            models.Index(fields=['-created_at']),\n        ]\n    \n    def __str__(self):\n        return f\"{self.name if hasattr(self, 'name') else self.id}\"\n    \n    def save(self, *args, **kwargs):\n        \"\"\"保存前的驗證\"\"\"\n        # 添加自定義驗證邏輯\n        super().save(*args, **kwargs)\n",
    "views.py": "\"\"\"\n待辦事項 - API 視圖\n自動生成 by 藍圖小老鼠\n\"\"\"\n\nfrom rest_framework import viewsets, status\nfrom rest_framework.decorators import action\nfrom rest_framework.response import Response\nfrom rest_framework.permissions import IsAuthenticated\nfrom django.shortcuts import get_object_or_404\n\nfrom .models import 待辦事項\nfrom .serializers import 待辦事項Serializer\n\n\nclass 待辦事項ViewSet(viewsets.ModelViewSet):\n    \"\"\"\n    待辦事項管理\n    \n    提供標準的 CRUD 操作:\n    - list: 獲取列表\n    - create: 創建\n    - retrieve: 獲取詳情\n    - update: 更新\n    - partial_update: 部分更新\n    - destroy: 刪除\n    \"\"\"\n    queryset = 待辦事項.objects.all()\n    serializer_class = 待辦事項Serializer\n    permission_classes = [IsAuthenticated]\n    \n    def get_queryset(self):\n        \"\"\"\n        過濾查詢集\n        只返回當前用戶的數據\n        \"\"\"\n        queryset = super().get_queryset()\n        \n        # 只返回啟用的數據\n        queryset = queryset.filter(is_active=True)\n        \n        # 只返回當前用戶的數據\n        if not self.request.user.is_staff:\n            queryset = queryset.filter(user=self.request.user)\n        \n        return queryset\n    \n    def perform_create(self, serializer):\n        \"\"\"創建時自動關聯用戶\"\"\"\n        serializer.save(user=self.request.user)\n    \n    @action(detail=True, methods=['post'])\n    def activate(self, request, pk=None):\n        \"\"\"啟用\"\"\"\n        obj = self.get_object()\n        obj.is_active = True\n        obj.save()\n        return Response({'status': 'activated'})\n    \n    @action(detail=True, methods=['post'])\n    def deactivate(self, request, pk=None):\n        \"\"\"停用\"\"\"\n        obj = self.get_object()\n        obj.is_active = False\n        obj.save()\n        return Response({'status': 'deactivated'})\n",
    "serializers.py": "\"\"\"\n待辦事項 - 序列化器\n自動生成 by 藍圖小老鼠\n\"\"\"\n\nfrom rest_framework import serializers\nfrom .models import 待辦事項\n\n\nclass 待辦事項Serializer(serializers.ModelSerializer):\n    \"\"\"\n    待辦事項管理序列化器\n    \"\"\"\n    \n    class Meta:\n        model = 待辦事項\n        fields = '__all__'\n        read_only_fields = ['created_at', 'updated_at']\n    \n    def validate(self, data):\n        \"\"\"\n        自定義驗證\n        \"\"\"\n        # 添加驗證邏輯\n        return data\n    \n    def create(self, validated_data):\n        \"\"\"\n        創建實例\n        \"\"\"\n        return super().create(validated_data)\n    \n    def update(self, instance, validated_data):\n        \"\"\"\n        更新實例\n        \"\"\"\n        return super().update(instance, validated_data)\n",
    "urls.py": "\"\"\"\n待辦事項 - URL 配置\n自動生成 by 藍圖小老鼠\n\"\"\"\n\nfrom django.urls import path, include\nfrom rest_framework.routers import DefaultRouter\nfrom .views import 待辦事項ViewSet\n\n# 創建路由器\nrouter = DefaultRouter()\nrouter.register(r'待辦事項', 待辦事項ViewSet, basename='待辦事項')\n\n# URL 模式\nurlpatterns = [\n    path('', include(router.urls)),\n]\n",
    "requirements.txt": "Django>=4.2.0\ndjangorestframework>=3.14.0\ndjango-cors-headers>=4.0.0\npython-decouple>=3.8\ndjangorestframework-simplejwt>=5.2.0\npsycopg2-binary>=2.9.0",
    "admin.py": "\"\"\"\n待辦事項 - Admin 配置\n自動生成 by 藍圖小老鼠\n\"\"\"\n\nfrom django.contrib import admin\nfrom .models import 待辦事項\n\n\n@admin.register(待辦事項)\nclass 待辦事項Admin(admin.ModelAdmin):\n    \"\"\"\n    待辦事項管理 Admin\n    \"\"\"\n    list_display = ['id', 'created_at', 'is_active']\n    list_filter = ['is_active', 'created_at']\n    search_fields = ['id']\n    ordering = ['-created_at']\n    \n    fieldsets = (\n        ('基本信息', {\n            'fields': ('is_active',)\n        }),\n        ('時間信息', {\n            'fields': ('created_at', 'updated_at'),\n            'classes': ('collapse',)\n        }),\n    )\n    \n    readonly_fields = ['created_at', 'updated_at']\n",
    "tests.py": "\"\"\"\n待辦事項 - 測試\n自動生成 by 藍圖小老鼠\n\"\"\"\n\nfrom django.test import TestCase\nfrom django.contrib.auth.models import User\nfrom rest_framework.test import APIClient\nfrom rest_framework import status\n\nfrom .models import 待辦事項\n\n\nclass 待辦事項TestCase(TestCase):\n    \"\"\"\n    待辦事項管理測試\n    \"\"\"\n    \n    def setUp(self):\n        \"\"\"測試前準備\"\"\"\n        self.client = APIClient()\n        self.user = User.objects.create_user(\n            username='testuser',\n            password='testpass123'\n        )\n        self.client.force_authenticate(user=self.user)\n    \n    def test_create(self):\n        \"\"\"測試創建\"\"\"\n        data = {}\n        response = self.client.post('/api/待辦事項/', data)\n        self.assertEqual(response.status_code, status.HTTP_201_CREATED)\n    \n    def test_list(self):\n        \"\"\"測試列表\"\"\"\n        response = self.client.get('/api/待辦事項/')\n        self.assertEqual(response.status_code, status.HTTP_200_OK)\n    \n    def test_retrieve(self):\n        \"\"\"測試詳情\"\"\"\n        obj = 待辦事項.objects.create()\n        response = self.client.get(f'/api/待辦事項/{obj.id}/')\n        self.assertEqual(response.status_code, status.HTTP_200_OK)\n    \n    def test_update(self):\n        \"\"\"測試更新\"\"\"\n        obj = 待辦事項.objects.create()\n        data = {}\n        response = self.client.put(f'/api/待辦事項/{obj.id}/', data)\n        self.assertEqual(response.status_code, status.HTTP_200_OK)\n    \n    def test_delete(self):\n        \"\"\"測試刪除\"\"\"\n        obj = 待辦事項.objects.create()\n        response = self.client.delete(f'/api/待辦事項/{obj.id}/')\n        self.assertEqual(response.status_code, status.HTTP_204_NO_CONTENT)\n"
  },
  "setup_instructions": "\n# Django 項目設置說明\n\n## 1. 安裝依賴\n```bash\npip install -r requirements.txt\n```\n\n## 2. 配置數據庫\n在 settings.py 中配置:\n```python\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.postgresql',\n        'NAME': 'your_db_name',\n        'USER': 'your_db_user',\n        'PASSWORD': 'your_db_password',\n        'HOST': 'localhost',\n        'PORT': '5432',\n    }\n}\n```\n\n## 3. 運行遷移\n```bash\npython manage.py makemigrations\npython manage.py migrate\n```\n\n## 4. 創建超級用戶\n```bash\npython manage.py createsuperuser\n```\n\n## 5. 運行服務器\n```bash\npython manage.py runserver\n```\n\n## 6. 訪問 API\n- API 文檔: http://localhost:8000/api/\n- Admin 後台: http://localhost:8000/admin/\n",
  "metadata": {
    "generated_at": "2026-01-11 12:54",
    "generator": "藍圖小老鼠 v5.2",
    "quality_score": 76
  }
}